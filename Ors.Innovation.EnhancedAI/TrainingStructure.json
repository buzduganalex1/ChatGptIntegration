[
  {
    "ParameterName": "ALLOW_WEBORDER_ITEM_DELETE",
    "FunctionName": "CartOrderTicketItemActionsMenuAction.js",
    "FunctionBlock": "context) {\r\n        if (!context) { throw new Error(\"context is null or undefined\"); }\r\n\r\n        var cartLine = context;\r\n\r\n        if (!cartLine.isActionMenuOpen()) {\r\n            var cartLineActions = cartLine.actions();\r\n            cartLineActions.length = 0;\r\n\r\n            // Navigate\r\n            if (my.common.data.Context.getAppSetting(\u0027ENABLE_ITEM_DETAILS\u0027) === \u0027True\u0027) {\r\n                cartLineActions.push(new my.pos.mod.payment.cartLineActions.NavigateToItemCartLineAction());\r\n            }\r\n\r\n            if (cartLine.saleTransactionItem.isVoid) {\r\n                // If voided, only unvoid is possible\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027PAYMENT_ALLOW_UNVOID_ITEM\u0027)) {\r\n                    cartLineActions.push(new my.pos.mod.ordering.cartLineActions.RemoveOrderTicketItemCartLineAction());\r\n                }\r\n            } else {\r\n                // Only allow the following buttons if item is not deleted\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER_CHANGE\u0027)) {\r\n                    // Change quantity\r\n                    cartLineActions.push(new my.pos.mod.ordering.cartLineActions.SetOrderQuantityCartLineAction());\r\n                }\r\n\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER_ITEM_DELETE\u0027)) {\r\n                    // Change quantity\r\n                    cartLineActions.push(new my.pos.mod.ordering.cartLineActions.RemoveOrderTicketItemCartLineAction());\r\n                }\r\n\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER_ITEM_COMMENT\u0027)) {\r\n                    // Set comment\r\n                    cartLineActions.push(new my.pos.mod.payment.cartLineActions.SetCommentCartLineAction());\r\n                }\r\n\r\n                // Add discounts, but disable if not allowed to use\r\n                self.addDiscounts(cartLineActions);\r\n\r\n                // Allow other modules to inject cartline options\r\n                var builders = my.pos.mod.payment.cartLineActions.CartLineOrderActionBuilder.getBuilders();\r\n                $.each(builders, "
  },
  {
    "ParameterName": "ALLOW_WEBORDER_ITEM_COMMENT",
    "FunctionName": "CartOrderTicketItemActionsMenuAction.js",
    "FunctionBlock": "context) {\r\n        if (!context) { throw new Error(\"context is null or undefined\"); }\r\n\r\n        var cartLine = context;\r\n\r\n        if (!cartLine.isActionMenuOpen()) {\r\n            var cartLineActions = cartLine.actions();\r\n            cartLineActions.length = 0;\r\n\r\n            // Navigate\r\n            if (my.common.data.Context.getAppSetting(\u0027ENABLE_ITEM_DETAILS\u0027) === \u0027True\u0027) {\r\n                cartLineActions.push(new my.pos.mod.payment.cartLineActions.NavigateToItemCartLineAction());\r\n            }\r\n\r\n            if (cartLine.saleTransactionItem.isVoid) {\r\n                // If voided, only unvoid is possible\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027PAYMENT_ALLOW_UNVOID_ITEM\u0027)) {\r\n                    cartLineActions.push(new my.pos.mod.ordering.cartLineActions.RemoveOrderTicketItemCartLineAction());\r\n                }\r\n            } else {\r\n                // Only allow the following buttons if item is not deleted\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER_CHANGE\u0027)) {\r\n                    // Change quantity\r\n                    cartLineActions.push(new my.pos.mod.ordering.cartLineActions.SetOrderQuantityCartLineAction());\r\n                }\r\n\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER_ITEM_DELETE\u0027)) {\r\n                    // Change quantity\r\n                    cartLineActions.push(new my.pos.mod.ordering.cartLineActions.RemoveOrderTicketItemCartLineAction());\r\n                }\r\n\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER_ITEM_COMMENT\u0027)) {\r\n                    // Set comment\r\n                    cartLineActions.push(new my.pos.mod.payment.cartLineActions.SetCommentCartLineAction());\r\n                }\r\n\r\n                // Add discounts, but disable if not allowed to use\r\n                self.addDiscounts(cartLineActions);\r\n\r\n                // Allow other modules to inject cartline options\r\n                var builders = my.pos.mod.payment.cartLineActions.CartLineOrderActionBuilder.getBuilders();\r\n                $.each(builders, "
  },
  {
    "ParameterName": "ALLOW_ORDER_ITEM_RESERVATION",
    "FunctionName": "SaleTransactionHandleDeliverableItemsPipelineEntry.js",
    "FunctionBlock": ") {\r\n        return my.common.data.Context.isAppSettingTrue(\"ALLOW_ORDER_ITEM_RESERVATION\");\r\n    };\r\n\r\n    self.createBeforeFinishPromise = "
  },
  {
    "ParameterName": "ALLOW_WEBORDER",
    "FunctionName": "WeborderNavigationItem.js",
    "FunctionBlock": ") {\r\n        my.common.actions.ActionManager.executeAction(my.pos.mod.ordering.actions.ActionConstants.getOrders);\r\n    };\r\n\r\n    self.visible(my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER\u0027));\r\n\r\n    // Listen for changes\r\n    eventAggregator.on(my.common.constants.eventTopics.applicationSettingChanged, "
  },
  {
    "ParameterName": "ALLOW_WEBORDER_CHANGE",
    "FunctionName": "CartOrderTicketItemActionsMenuAction.js",
    "FunctionBlock": "context) {\r\n        if (!context) { throw new Error(\"context is null or undefined\"); }\r\n\r\n        var cartLine = context;\r\n\r\n        if (!cartLine.isActionMenuOpen()) {\r\n            var cartLineActions = cartLine.actions();\r\n            cartLineActions.length = 0;\r\n\r\n            // Navigate\r\n            if (my.common.data.Context.getAppSetting(\u0027ENABLE_ITEM_DETAILS\u0027) === \u0027True\u0027) {\r\n                cartLineActions.push(new my.pos.mod.payment.cartLineActions.NavigateToItemCartLineAction());\r\n            }\r\n\r\n            if (cartLine.saleTransactionItem.isVoid) {\r\n                // If voided, only unvoid is possible\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027PAYMENT_ALLOW_UNVOID_ITEM\u0027)) {\r\n                    cartLineActions.push(new my.pos.mod.ordering.cartLineActions.RemoveOrderTicketItemCartLineAction());\r\n                }\r\n            } else {\r\n                // Only allow the following buttons if item is not deleted\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER_CHANGE\u0027)) {\r\n                    // Change quantity\r\n                    cartLineActions.push(new my.pos.mod.ordering.cartLineActions.SetOrderQuantityCartLineAction());\r\n                }\r\n\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER_ITEM_DELETE\u0027)) {\r\n                    // Change quantity\r\n                    cartLineActions.push(new my.pos.mod.ordering.cartLineActions.RemoveOrderTicketItemCartLineAction());\r\n                }\r\n\r\n                if (my.common.data.Context.isAppSettingTrue(\u0027ALLOW_WEBORDER_ITEM_COMMENT\u0027)) {\r\n                    // Set comment\r\n                    cartLineActions.push(new my.pos.mod.payment.cartLineActions.SetCommentCartLineAction());\r\n                }\r\n\r\n                // Add discounts, but disable if not allowed to use\r\n                self.addDiscounts(cartLineActions);\r\n\r\n                // Allow other modules to inject cartline options\r\n                var builders = my.pos.mod.payment.cartLineActions.CartLineOrderActionBuilder.getBuilders();\r\n                $.each(builders, "
  },
  {
    "ParameterName": "ALLOW_WEBORDER_RETURN",
    "FunctionName": "LocalSettingGetReturnOrders.js",
    "FunctionBlock": ") {\r\n        self.title(resources.get(\u0027opt_ttl_get_return_orders\u0027));\r\n        self.visible(my.common.data.Context.getAppSetting(\u0027ALLOW_WEBORDER_RETURN\u0027) === \u0027True\u0027);\r\n    };\r\n\r\n    self.actionId(my.pos.mod.ordering.actions.ActionConstants.getReturnOrders);\r\n    self.requireUserLogon = true;\r\n    self.requiredPermission = \"INPOSITION_GET_RETURN_ORDERS\";\r\n};"
  },
  {
    "ParameterName": "ALLOW_RETURN_WEBORDER_CHANGE",
    "FunctionName": "CartReturnOrderTicketItemActionsMenuAction.js",
    "FunctionBlock": "context) {\r\n        if (!context) { throw new Error(\"context is null or undefined\"); }\r\n\r\n        var cartLine = context;\r\n\r\n        if (!cartLine.isActionMenuOpen()) {\r\n            var cartLineActions = cartLine.actions();\r\n            cartLineActions.length = 0;\r\n\r\n            // Navigate\r\n            if (my.common.data.Context.getAppSetting(\u0027ENABLE_ITEM_DETAILS\u0027) === \u0027True\u0027) {\r\n                cartLineActions.push(new my.pos.mod.payment.cartLineActions.NavigateToItemCartLineAction());\r\n            }\r\n\r\n            // Only allow changing quantity if the containing return order hasn\u0027t been presettled yet\r\n            var parent = my.pos.mod.payment.service.cartProviderService.getParentByCartLineSale(cartLine);\r\n            if (parent \u0026\u0026 my.common.data.Context.isAppSettingTrue(\u0027ALLOW_RETURN_WEBORDER_CHANGE\u0027)) {\r\n                cartLineActions.push(new my.pos.mod.ordering.cartLineActions.SetReturnOrderQuantityCartLineAction());\r\n            }\r\n\r\n            $.each(cartLineActions, "
  },
  {
    "ParameterName": "RETURN_ORDER_ASK_AUTOMATIC_TENDER_ONLY",
    "FunctionName": "SaleTransactionHandleAutomaticRefundsPipelineEntry.js",
    "FunctionBlock": "saleTransaction) {\r\n\r\n        var defer = new $.Deferred();\r\n\r\n        // When property consume automatic refund first is true, return this.\r\n        if (my.common.data.Context.isAppSettingTrue(\"RETURN_ORDER_CONSUME_AUTOMATIC_REFUND_FIRST\")) {\r\n\r\n            if (my.common.data.Context.isAppSettingTrue(\"RETURN_ORDER_ASK_AUTOMATIC_TENDER_ONLY\")) {\r\n                return askForgetAutomaticRefundConsumeStrategy(saleTransaction, consumeStrategies.consumeAutomaticFirst);\r\n            }\r\n            else {\r\n                defer.resolve(consumeStrategies.consumeAutomaticFirst);\r\n            }\r\n        }\r\n        else {\r\n\r\n            if (my.common.data.Context.isAppSettingTrue(\"RETURN_ORDER_ASK_AUTOMATIC_TENDER_ONLY\")) {\r\n                return askForgetAutomaticRefundConsumeStrategy(saleTransaction, consumeStrategies.consumeAutomaticLast);\r\n            }\r\n            else {\r\n                defer.resolve(consumeStrategies.consumeAutomaticLast);\r\n            }\r\n        }\r\n\r\n        return defer.promise();\r\n    };\r\n\r\n    var addAutomaticRefunds = "
  },
  {
    "ParameterName": "AUTO_SELECT_QUANTITY_ONE_WEB_ORDER_RETURNS",
    "FunctionName": "SetReturnOrderQuantityCartLineAction.js",
    "FunctionBlock": "transactionItem) {\r\n\r\n        var defer = new $.Deferred();\r\n        var context = {};\r\n        context.startQuantity = transactionItem.quantity;\r\n        context.maximumQuantity = transactionItem.quantity;\r\n\r\n        if (transactionItem.quantity === 1 \u0026\u0026 transactionItem.returnQuantity === 0 \u0026\u0026 my.common.data.Context.getAppSetting(\u0027AUTO_SELECT_QUANTITY_ONE_WEB_ORDER_RETURNS\u0027) === \"True\") {\r\n            defer.resolve(1);\r\n            return defer.promise();\r\n        } else {\r\n            return my.common.actions.ActionManager.executeAction(my.shared.app.actions.ActionConstants.getNumericQuantityFromInputAction, context);\r\n        }\r\n    };\r\n\r\n    self.updateCartline = "
  },
  {
    "ParameterName": "DISPLAY_ORDER_DETAILS",
    "FunctionName": "service.OrderTicketFetcher.js",
    "FunctionBlock": "data) {\r\n\t\t\t\t\t// ok not pressed, reject\r\n\t\t\t\t\tif (data.result !== my.PopupResult.Ok) {\r\n\t\t\t\t\t\tdefer.reject();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// try to fetch the selected web order\r\n\t\t\t\t\tconst selectedOrder = popupModel.getSelectedItem().payload;\r\n\t\t\t\t\tconst transactionId = selectedOrder.id;\r\n\r\n\t\t\t\t\t// check DISPLAY_ORDER_DETAILS\r\n\t\t\t\t\tif (context.isAppSettingTrue(\u0027DISPLAY_ORDER_DETAILS\u0027)) {\r\n\t\t\t\t\t\tactionManager\r\n\t\t\t\t\t\t\t.executeAction(orderingActions.navigateToOrder, transactionId)\r\n\t\t\t\t\t\t\t.done(defer.resolve)\r\n\t\t\t\t\t\t\t.fail(defer.reject);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfetchOrderAndAddToTransaction(transactionId)\r\n\t\t\t\t\t\t\t.done(defer.resolve)\r\n\t\t\t\t\t\t\t.fail(defer.reject);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn defer.promise();\r\n\t};\r\n\r\n\t// Fetch an order to return with the selected orderId.\r\n\t// It returns a promise. If the promise rejects with true, this means, the order is not found\r\n\tconst fetchReturnOrder = "
  },
  {
    "ParameterName": "DISPLAY_WEBORDER_MENUBAR",
    "FunctionName": "moduleInit.js",
    "FunctionBlock": "setting) {\r\n\t\t\tif (setting.key === \u0027DISPLAY_WEBORDER_MENUBAR\u0027) {\r\n\t\t\t\tvar nav = my.pos.app.vm.shell.pageHeader.navigation;\r\n\r\n\t\t\t\tif (setting.value === \u0027True\u0027) {\r\n\t\t\t\t\tvar orderNavigationItem = new my.pos.mod.ordering.ui.WeborderNavigationItem(my.pos.mod.ordering.constants.navigationItems.weborder);\r\n\t\t\t\t\tnav.bar().addItem(orderNavigationItem);\r\n\r\n\t\t\t\t\tvar div = $(\u0027#\u0027 + orderNavigationItem.id);\r\n\t\t\t\t\tvar badge = new my.shared.app.services.SimpleBadge({\r\n\t\t\t\t\t\tparentElementSelector: $(\u0027div.icon\u0027, div),\r\n\t\t\t\t\t\tverticalAlignment: \u0027-5%\u0027,\r\n\t\t\t\t\t\thorizontalAlignment: my.shared.app.services.Badge.alignment.right,\r\n\t\t\t\t\t\tstrokeWidth: 2,\r\n\t\t\t\t\t\twidth: 20,\r\n\t\t\t\t\t\theight: 20\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbadge.show(0);\r\n\t\t\t\t\tbadge.subscribe(orderNavigationItem.badger);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnav.bar().removeItem(my.pos.mod.ordering.constants.navigationItems.weborder);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tvar registerTicketPartRenderers = "
  },
  {
    "ParameterName": "ORDER_DISPLAY_STATUS_IN_ORDER_SUMMARY",
    "FunctionName": "service.OrderTicketFetcher.js",
    "FunctionBlock": ") {\r\n\t\t\t\t\tdefer.reject();\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// no web orders available\r\n\t\t\tif (data == null || data.length === 0) {\r\n\t\t\t\tif (showMessageWhenNoOrders) {\r\n\t\t\t\t\tmy.Popup\r\n\t\t\t\t\t\t.showOk(resources.get(\u0027ord_msg_no_orders_found\u0027), \u0027\u0027)\r\n\t\t\t\t\t\t.always(defer.reject);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdefer.reject();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// only one web order available and autoSelectWhenOne is true\r\n\t\t\tif (data.length === 1 \u0026\u0026 autoSelectWhenOne) {\r\n\r\n\t\t\t\tfetchOrderAndAddToTransaction(data[0].Id)\r\n\t\t\t\t\t.done(defer.resolve)\r\n\t\t\t\t\t.fail(defer.reject);\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// prepare the select popup of all available web orders\r\n\t\t\tconst popupModel = new my.pos.app.vm.FilterDropdownSelectPopupContent();\r\n\t\t\tpopupModel.resolveOnClick = true;\r\n\t\t\tpopupModel.allowFullScreen = true;\r\n\t\t\tpopupModel.hasFilter(true);\r\n\r\n\t\t\tif (context.isAppSettingTrue(\"ORDER_DISPLAY_STATUS_IN_ORDER_SUMMARY\")) {\r\n\t\t\t\tpopupModel.hasDropdown(true);\r\n\r\n\t\t\t\tpopupModel.dropdownFilterOptions(createOrderStatusOptions());\r\n\t\t\t\tpopupModel.dropdownFilterPropertyName = \u0027status\u0027;\r\n\t\t\t\tpopupModel.dropdownCaption = resources.get(\u0027order_status\u0027);\r\n\t\t\t\tpopupModel.onDropdownValueChanged = "
  },
  {
    "ParameterName": "ORDER_DISPLAY_TOTAL_AMOUNT_IN_ORDER_SUMMARY",
    "FunctionName": "service.OrderTicketFetcher.js",
    "FunctionBlock": "s) {\r\n\t\t\t\t\t\t\t\treturn [s.payload.Id,\r\n\t\t\t\t\t\t\t\ts.payload.TotalAmount,\r\n\t\t\t\t\t\t\t\ts.payload.Name,\r\n\t\t\t\t\t\t\t\ts.payload.Description\r\n\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tif (!context.isAppSettingTrue(\u0027ORDER_DISPLAY_TOTAL_AMOUNT_IN_ORDER_SUMMARY\u0027)) {\r\n\t\t\t\t\t\t\t\to.TotalAmount = null;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tselectable.payload = o;\r\n\t\t\t\t\t\t\tselectable.template = \u0027SelectOrderTransaction\u0027;\r\n\t\t\t\t\t\t\tmodels.push(selectable);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tupdatePopupModelItems(popupModel, data);\r\n\r\n\t\t\t\t\t\tmy.Popup.show(resources.get(\u0027pop_ttl_select_return_order\u0027), [my.PopupButtons.Cancel], popupModel)\r\n\t\t\t\t\t\t\t.done("
  },
  {
    "ParameterName": "ENABLE_WEBORDER_RETURN_PRESETTLE",
    "FunctionName": "SaleTransactionHandleReturnOrderTicketPipelineEntry.js",
    "FunctionBlock": "saleTransaction) {\r\n        var defer = new $.Deferred();\r\n\r\n        if (my.common.data.Context.getAppSetting(\u0027ENABLE_WEBORDER_RETURN_PRESETTLE\u0027) === \u0027True\u0027 \u0026\u0026 returnOrderTicketsPending()) {\r\n            my.Popup.showOk(resources.get(\"pay_pop_msg_return_order_ticket_in_progress_on_payment\"), \u0027\u0027)\r\n                .done("
  },
  {
    "ParameterName": "GET_ORDERS_ON_CUSTOMER_REGISTRATION",
    "FunctionName": "HandleCustomerPipelineEntry.js",
    "FunctionBlock": "customerTransactionItem) {\r\n\t\tif (my.common.data.Context.isAppSettingFalse(\u0027GET_ORDERS_ON_CUSTOMER_REGISTRATION\u0027)) {\r\n\t\t\treturn my.utils.PromiseHelper.createResolvedPromise(customerTransactionItem);\r\n\t\t}\r\n\r\n\t\tvar saleTransaction = my.transactions.saleTransactionContext.getSaleTransaction();\r\n\r\n\t\tif (saleTransaction.hasOrderTickets() === true) {\r\n\t\t\treturn my.utils.PromiseHelper.createResolvedPromise(customerTransactionItem);\r\n\t\t}\r\n\r\n\t\tvar defer = new $.Deferred();\r\n\r\n\t\tmy.common.actions.ActionManager\r\n\t\t\t.executeAction(my.pos.mod.ordering.actions.ActionConstants.getOrdersForCustomer, { customerId: customerTransactionItem.customer.customerId })\r\n\t\t\t.always("
  },
  {
    "ParameterName": "MAX_WEBORDERS_PER_TICKET",
    "FunctionName": "AddOrderTicketValidator.js",
    "FunctionBlock": "orderTicket) {\r\n    \"use strict\";\r\n    var baseValidator = new my.pos.mod.ordering.validators.AddOrderTicketValidatorBase(this.saleTransaction, this.saleTransaction.orderTickets, this.settings, \"MAX_WEBORDERS_PER_TICKET\");\r\n\r\n    var validationResult = baseValidator.canAddTicket(\r\n        orderTicket,\r\n        {\r\n            ticketAlreadyAddedMessage: {\r\n                message: this.resources.get(\"scan_pop_msg_ticket_already_added\"),\r\n                title: this.resources.get(\"scan_pop_ttl_scan_error\")\r\n            },\r\n            maxOrdersPerTicketReachedMessage: {\r\n                message: this.resources.get(\"scan_pop_msg_max_orders_per_ticket_reached\"),\r\n                title: this.resources.get(\"scan_pop_ttl_scan_error\")\r\n            },\r\n            cartNotEmptyMessage: {\r\n                message: this.resources.get(\"scan_pop_msg_cart_is_not_empty\"),\r\n                title: this.resources.get(\"scan_pop_ttl_scan_error\")\r\n            },\r\n            cartContainsVoidedItems: {\r\n                message: this.resources.get(\"scan_pop_msg_cart_contains_voided_items\"),\r\n                title: this.resources.get(\"scan_pop_ttl_scan_error\")\r\n            },\r\n            orderAlreadyPaid: {\r\n                message: this.resources.get(\"scan_pop_msg_order_already_paid\"),\r\n                title: this.resources.get(\"scan_pop_ttl_scan_error\")\r\n            },\r\n            orderAlreadyClaimed: {\r\n                message: this.resources.get(\"ord_msg_order_already_claimed_error\"),\r\n                title: this.resources.get(\"scan_pop_ttl_scan_error\")\r\n            }\r\n        });\r\n\r\n    return validationResult;\r\n};"
  }
]
